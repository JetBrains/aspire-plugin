<idea-plugin visibility="internal">
    <dependencies>
        <plugin id="com.intellij.modules.platform"/>
        <plugin id="com.intellij.modules.rider"/>
    </dependencies>

    <resource-bundle>messages.AspireCoreBundle</resource-bundle>

    <extensionPoints>
        <extensionPoint qualifiedName="com.jetbrains.rider.aspire.sessionProcessLauncherExtension"
                        interface="com.jetbrains.rider.aspire.sessions.projectLaunchers.SessionProcessLauncherExtension"
                        dynamic="true"/>
        <extensionPoint qualifiedName="com.jetbrains.rider.aspire.openTelemetryProtocolServerExtension"
                        interface="com.jetbrains.rider.aspire.otlp.OpenTelemetryProtocolServerExtension"
                        dynamic="true"/>
        <extensionPoint qualifiedName="com.jetbrains.rider.aspire.resourceIconProviderExtension"
                        interface="com.jetbrains.rider.aspire.dashboard.AspireResourceIconProviderExtension"
                        dynamic="true"/>
    </extensionPoints>

    <extensions defaultExtensionNs="com.intellij">
        <configurationType implementation="com.jetbrains.rider.aspire.run.AspireHostConfigurationType"/>
        <runConfigurationProducer implementation="com.jetbrains.rider.aspire.run.AspireHostRunConfigurationProducer"/>
        <programRunner implementation="com.jetbrains.rider.aspire.run.runners.AspireHostProgramRunner"/>
        <programRunner implementation="com.jetbrains.rider.aspire.run.runners.AspireHostDebugProgramRunner"/>
        <programRunner
                implementation="com.jetbrains.rider.aspire.sessions.projectLaunchers.ProjectSessionProgramRunner"/>
        <programRunner
                implementation="com.jetbrains.rider.aspire.sessions.projectLaunchers.ProjectSessionDebugProgramRunner"/>
        <programRunner
                implementation="com.jetbrains.rider.aspire.rider.sessions.wasmHost.WasmHostProjectSessionDebugProgramRunner"/>

        <serviceViewContributor implementation="com.jetbrains.rider.aspire.dashboard.AspireMainServiceViewContributor"/>

        <applicationConfigurable
                parentId="tools"
                instance="com.jetbrains.rider.aspire.settings.AspireConfigurable"
                id="Aspire.Configurable"
                key="configurable.Aspire"
                bundle="messages.AspireCoreBundle"/>


        <webHelpProvider implementation="com.jetbrains.rider.aspire.AspireHelpProvider"/>

        <iconMapper mappingFile="AspireCoreIconMappings.json"/>
    </extensions>

    <extensions defaultExtensionNs="com.jetbrains.rider.aspire">
        <resourceIconProviderExtension
                implementation="com.jetbrains.rider.aspire.util.BaseAspireResourceIconProvider"/>
    </extensions>

    <projectListeners>
        <listener class="com.jetbrains.rider.aspire.worker.AspireWorkerManager$RunListener"
                  topic="com.intellij.execution.RunManagerListener"/>
    </projectListeners>

    <actions>
        <action id="Aspire.Settings"
                class="com.jetbrains.rider.aspire.actions.AspireSettingsAction"
                icon="AllIcons.General.Settings"/>
        <action id="Aspire.Help"
                class="com.jetbrains.rider.aspire.actions.AspireHelpAction"/>
        <action id="Aspire.Solution.Manifest"
                class="com.jetbrains.rider.aspire.actions.ManifestGenerationAction"
                icon="AllIcons.FileTypes.Json">
            <add-to-group group-id="SolutionExplorerPopupMenu.Tools"/>
        </action>
        <group id="Aspire.Host">
            <action id="Aspire.Host.Run"
                    class="com.jetbrains.rider.aspire.actions.dashboard.host.RunHostAction"
                    icon="AllIcons.Actions.Execute"/>
            <action id="Aspire.Host.Debug"
                    class="com.jetbrains.rider.aspire.actions.dashboard.host.DebugHostAction"
                    icon="AllIcons.Actions.StartDebugger"/>
            <action id="Aspire.Host.Stop"
                    class="com.jetbrains.rider.aspire.actions.dashboard.host.StopHostAction"
                    icon="AllIcons.Actions.Suspend"/>
            <action id="Aspire.Host.Dashboard"
                    class="com.jetbrains.rider.aspire.actions.dashboard.host.AspireOpenDashboardAction"
                    icon="AllIcons.General.Web"/>
            <action id="Aspire.Host.Manifest"
                    class="com.jetbrains.rider.aspire.actions.dashboard.host.AspireManifestAction"
                    icon="AllIcons.FileTypes.Json"/>
        </group>
        <group id="Aspire.Resource">
            <action id="Aspire.Resource.Start"
                    class="com.jetbrains.rider.aspire.actions.dashboard.resource.StartResourceAction"
                    icon="AllIcons.Actions.Execute"/>
            <action id="Aspire.Resource.Stop"
                    class="com.jetbrains.rider.aspire.actions.dashboard.resource.StopResourceAction"
                    icon="AllIcons.Actions.Suspend"/>
            <action id="Aspire.Resource.Restart"
                    class="com.jetbrains.rider.aspire.actions.dashboard.resource.RestartResourceAction"
                    icon="AllIcons.Actions.Restart"/>
            <action id="Aspire.Resource.RestartWithoutDebugger"
                    class="com.jetbrains.rider.aspire.actions.dashboard.resource.RestartWithoutDebuggerResourceAction"
                    icon="AllIcons.Actions.Rerun"/>
            <action id="Aspire.Resource.RestartWithDebugger"
                    class="com.jetbrains.rider.aspire.actions.dashboard.resource.RestartWithDebuggerResourceAction"
                    icon="AllIcons.Actions.RestartDebugger"/>
            <action id="Aspire.Resource.NavigateToDebugTab"
                    class="com.jetbrains.rider.aspire.actions.dashboard.resource.NavigateToResourceDebugTab"
                    icon="AllIcons.General.OpenInToolWindow"/>
            <action id="Aspire.Resource.Execute.Command"
                    class="com.jetbrains.rider.aspire.actions.dashboard.resource.PerformResourceAction"
                    icon="AllIcons.Actions.RunAnything"/>
        </group>
        <group id="Aspire.Session.Host">
            <action id="Aspire.Worker.Start"
                    class="com.jetbrains.rider.aspire.actions.StartAspireWorkerAction"
                    icon="AllIcons.Actions.Execute"/>
            <action id="Aspire.Worker.Stop"
                    class="com.jetbrains.rider.aspire.actions.StopAspireWorkerAction"
                    icon="AllIcons.Actions.Suspend"/>
        </group>
    </actions>

</idea-plugin>