<idea-plugin visibility="internal">
    <dependencies>
        <plugin id="com.intellij.modules.rider"/>
    </dependencies>

    <resource-bundle>messages.AspireCoreBundle</resource-bundle>

    <extensionPoints>
        <extensionPoint qualifiedName="com.jetbrains.aspire.startSessionRequestHandler"
                        interface="com.jetbrains.aspire.sessions.StartSessionRequestHandler"
                        dynamic="true"/>
        <extensionPoint qualifiedName="com.jetbrains.aspire.openTelemetryProtocolServerExtension"
                        interface="com.jetbrains.aspire.otlp.OpenTelemetryProtocolServerExtension"
                        dynamic="true"/>
        <extensionPoint qualifiedName="com.jetbrains.aspire.resourceIconProvider"
                        interface="com.jetbrains.aspire.dashboard.AspireResourceIconProvider"
                        dynamic="true"/>
        <extensionPoint qualifiedName="com.jetbrains.aspire.appHostLauncher"
                        interface="com.jetbrains.aspire.worker.AspireAppHostLauncher"
                        dynamic="true"/>
    </extensionPoints>

    <extensions defaultExtensionNs="com.intellij">
        <serviceViewContributor implementation="com.jetbrains.aspire.dashboard.AspireMainServiceViewContributor"/>

        <applicationConfigurable
                parentId="tools"
                instance="com.jetbrains.aspire.settings.AspireConfigurable"
                id="Aspire.Configurable"
                key="configurable.Aspire"
                bundle="messages.AspireCoreBundle"/>

        <webHelpProvider implementation="com.jetbrains.aspire.AspireHelpProvider"/>

        <iconMapper mappingFile="AspireCoreIconMappings.json"/>
    </extensions>

    <extensions defaultExtensionNs="com.jetbrains.aspire">
        <resourceIconProvider implementation="com.jetbrains.aspire.util.BaseAspireResourceIconProvider"/>
    </extensions>

    <actions>
        <action id="Aspire.Settings"
                class="com.jetbrains.aspire.actions.AspireSettingsAction"
                icon="AllIcons.General.Settings"/>
        <action id="Aspire.Help"
                class="com.jetbrains.aspire.actions.AspireHelpAction"/>
        <group id="Aspire.Worker">
            <action id="Aspire.Worker.Start"
                    class="com.jetbrains.aspire.actions.StartAspireWorkerAction"
                    icon="AllIcons.Actions.Execute"/>
            <action id="Aspire.Worker.Stop"
                    class="com.jetbrains.aspire.actions.StopAspireWorkerAction"
                    icon="AllIcons.Actions.Suspend"/>
        </group>
        <group id="Aspire.Host">
            <action id="Aspire.Host.Run"
                    class="com.jetbrains.aspire.actions.dashboard.host.RunHostAction"
                    icon="AllIcons.Actions.Execute">
                <override-text place="GoToAction"/>
            </action>
            <action id="Aspire.Host.Debug"
                    class="com.jetbrains.aspire.actions.dashboard.host.DebugHostAction"
                    icon="AllIcons.Actions.StartDebugger">
                <override-text place="GoToAction"/>
            </action>
            <action id="Aspire.Host.Stop"
                    class="com.jetbrains.aspire.actions.dashboard.host.StopHostAction"
                    icon="AllIcons.Actions.Suspend">
                <override-text place="GoToAction"/>
            </action>
            <action id="Aspire.Host.Dashboard"
                    class="com.jetbrains.aspire.actions.dashboard.host.AspireOpenDashboardAction"
                    icon="AllIcons.General.Web">
                <override-text place="GoToAction"/>
            </action>
        </group>
        <group id="Aspire.Resource">
            <action id="Aspire.Resource.Start"
                    class="com.jetbrains.aspire.actions.dashboard.resource.StartResourceAction"
                    icon="AllIcons.Actions.Execute">
                <override-text place="GoToAction"/>
            </action>
            <action id="Aspire.Resource.Stop"
                    class="com.jetbrains.aspire.actions.dashboard.resource.StopResourceAction"
                    icon="AllIcons.Actions.Suspend">
                <override-text place="GoToAction"/>
            </action>
            <action id="Aspire.Resource.Restart"
                    class="com.jetbrains.aspire.actions.dashboard.resource.RestartResourceAction"
                    icon="AllIcons.Actions.Restart">
                <override-text place="GoToAction"/>
            </action>
            <action id="Aspire.Resource.RestartWithoutDebugger"
                    class="com.jetbrains.aspire.actions.dashboard.resource.RestartWithoutDebuggerResourceAction"
                    icon="AllIcons.Actions.Rerun">
                <override-text place="GoToAction"/>
            </action>
            <action id="Aspire.Resource.RestartWithDebugger"
                    class="com.jetbrains.aspire.actions.dashboard.resource.RestartWithDebuggerResourceAction"
                    icon="AllIcons.Actions.RestartDebugger">
                <override-text place="GoToAction"/>
            </action>
            <action id="Aspire.Resource.Execute.Command"
                    class="com.jetbrains.aspire.actions.dashboard.resource.PerformResourceAction"
                    icon="AllIcons.Actions.RunAnything">
                <override-text place="GoToAction"/>
            </action>
        </group>
    </actions>
</idea-plugin>